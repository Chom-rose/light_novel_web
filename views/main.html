<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>หน้าหลัก</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/nav.css">
</head>

<body>
  <header>
    <nav>
      <div class="nav-header">
        <div class="logo">logo</div>

        
        <div class="search-user">
          <button id="openSearch" class="p-2">
            <i class="bx bx-search text-2xl"></i>
          </button>

          <!-- Overlay กล่องค้นหา (ซ่อนอยู่ก่อน) -->
          <div id="searchOverlay" class="fixed inset-0 bg-black/40 flex items-start justify-center pt-3 hidden z-50">
            <div class="bg-white shadow-lg rounded-lg p-6 w-full max-w-3xl">
              <div class="flex items-center gap-2">

                <!-- ประเภท -->
                <select class="border rounded-lg px-3 py-2 text-sm">
                  <option>นิยายสั้น</option>
                  <option>นิยายยาว</option>
                </select>

                <!-- หมวดหมู่ -->
                <select class="border rounded-lg px-3 py-2 text-sm">
                  <option>ทุกหมวด</option>
                  <option>แฟนตาซี</option>
                  <option>ระทึกขวัญ</option>
                  <option>โรแมนซ์</option>
                  <option>แอ๊คชั่น</option>
                  <option>ดราม่า</option>
                  <option>ไซไฟ</option>
                  <option>ตลก</option>
                </select>

                <!-- Input -->
                <input type="text" placeholder="ค้นหานิยาย ชื่อเรื่อง หรือผู้เขียน"
                  class="flex-1 border rounded-lg px-3 py-2 text-sm">


                <!-- ปุ่มค้นหา -->
                <button onclick="doSearch()" class="bg-orange-500 text-black px-5 py-2 rounded-lg">
                  <a href="/light-novel/search"
                    class="bg-orange-500 text-white px-5 py-2 rounded-lg hover:bg-indigo-700">
                    ค้นหา
                  </a>
                </button>

                <!-- ปุ่มปิด -->
                <button id="closeSearch" class="ml-2 text-gray-500 hover:text-black">
                  ✕
                </button>
              </div>
            </div>
          </div>


          <div class="profile">
            <button id="profileBtn" class="p-2">
              <i class="bx bx-user text-2xl"></i>
            </button>

            <!-- เมนู dropdown -->
            <div id="profileMenu" class="dropdown hidden">
              <div class="dropdown-header">
                <strong>สมาชิก</strong><br>
                <small>guest</small>
              </div>
              <ul>
                <li>
                  โหมดการแสดงผล
                  <label class="switch">
                    <input type="checkbox">
                    <span class="slider round"></span>
                  </label>
                </li>
                <li><a href="/light-novel/create">สร้างผลงาน</a></li>
                <li><a href="#">การตั้งค่า</a></li>
                <li><a href="#">วิธีใช้ / ช่วยเหลือ</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="nav-body">
        <ul class="nav-links">
          <li><span><a href="">หน้าหลัก</a></span></li>
          <li><a href="/light-novel/create">สร้างผลงาน</a></li>
        </ul>
        <div class="coin-balance">
          <span>Coin: 100 </span>
          <button><a href="">เติมcoin </a></button>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <section class="max-w-7xl mx-auto px-4 py-6">
      <h2 class="text-xl font-bold mb-4">นิยายยอดนิยม</h2>
      <div class="swiper mySwiper">
        <div class="swiper-wrapper">
          <!-- Slide 1 -->
          <div class="swiper-slide">
            <div class="relative">
              <img src="https://picsum.photos/800/400?random=1" class="w-full rounded-xl" alt="Novel 1">
              <div class="absolute bottom-3 left-3 bg-black/60 text-white px-3 py-1 rounded-lg">
                หอคอยกระจก
              </div>
            </div>
          </div>
          <!-- Slide 2 -->
          <div class="swiper-slide">
            <div class="relative">
              <img src="https://picsum.photos/800/400?random=2" class="w-full rounded-xl" alt="Novel 2">
              <div class="absolute bottom-3 left-3 bg-black/60 text-white px-3 py-1 rounded-lg">
                แชตลับฉบับรัก
              </div>
            </div>
          </div>
          <!-- Slide 3 -->
          <div class="swiper-slide">
            <div class="relative">
              <img src="https://picsum.photos/800/400?random=3" class="w-full rounded-xl" alt="Novel 3">
              <div class="absolute bottom-3 left-3 bg-black/60 text-white px-3 py-1 rounded-lg">
                กาลครั้งในอาณาจักรชา
              </div>
            </div>
          </div>
        </div>
        <!-- Navigation -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <!-- Pagination -->
        <div class="swiper-pagination"></div>
      </div>
    </section>



    <!-- Latest Updates -->
    <section class="max-w-7xl mx-auto px-4 py-10 space-y-12">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold">นิยายมาใหม่</h3>
        <a href="#" class="text-sm text-indigo-600 hover:underline">ดูทั้งหมด</a>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
        <article class="bg-white rounded-xl shadow p-2">
          <img src="https://picsum.photos/200/300?random=1" alt="" class="rounded-lg">
          <h4 class="font-semibold mt-2">หอคอยกระจก</h4>
          <p class="text-sm text-zinc-500">Mina K.</p>
        </article>
        <article class="bg-white rounded-xl shadow p-2">
          <img src="https://picsum.photos/200/300?random=2" alt="" class="rounded-lg">
          <h4 class="font-semibold mt-2">แชตลับฉบับรัก</h4>
          <p class="text-sm text-zinc-500">tenten</p>
        </article>
        <!-- เพิ่มการ์ดต่อได้ -->
      </div>
    </section>

    <!-- Trending -->
    <section>
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-xl font-bold">กำลังมาแรง</h3>
        <a href="#" class="text-sm text-indigo-600 hover:underline">ดูอันดับ</a>
      </div>
      <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4">
        <article class="bg-white rounded-xl shadow p-2">
          <img src="https://picsum.photos/200/300?random=3" alt="" class="rounded-lg">
          <h4 class="font-semibold mt-2">กาลครั้งในอาณาจักรชา</h4>
          <p class="text-sm text-zinc-500">Sora</p>
        </article>
        <!-- เพิ่มการ์ดต่อได้ -->
      </div>
    </section>

    
  </main>
  <footer>
    <div class="max-w-7xl mx-auto px-4 py-6 text-center text-sm text-zinc-500">
      &copy; 2025 cat fat. สงวนลิขสิทธิ์.
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    var swiper = new Swiper(".mySwiper", {
      loop: true,
      autoplay: {
        delay: 3000,
        disableOnInteraction: false,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
    });

    // เปิดกล่องค้นหา
    const openBtn = document.getElementById("openSearch");
    const closeBtn = document.getElementById("closeSearch");
    const overlay = document.getElementById("searchOverlay");

    openBtn.addEventListener("click", () => {
      overlay.classList.remove("hidden");
    });

    closeBtn.addEventListener("click", () => {
      overlay.classList.add("hidden");
    });


    const btn = document.getElementById("profileBtn");
    const menu = document.getElementById("profileMenu");

    btn.addEventListener("click", () => {
      menu.classList.toggle("hidden");
    });

    document.addEventListener("click", (e) => {
      if (!btn.contains(e.target) && !menu.contains(e.target)) {
        menu.classList.add("hidden");
      }
    });

    function doSearch() {
      const input = document.querySelector('#searchOverlay input[type="text"]');
      const keyword = input.value.trim();
      if (keyword) {
        window.location.href = `/search.html?q=${encodeURIComponent(keyword)}`;
      }
    }
  </script>
</body>

</html>